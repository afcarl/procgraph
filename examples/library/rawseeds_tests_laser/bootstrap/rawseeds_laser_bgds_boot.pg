--- model rawseeds_laser_bgds_boot
# Uses rawseeds_synchronized_laser as a source.
# .. config::
#   `logdir`
#     Rawseeds log directory.
import procgraph.components.rawseeds
import procgraph.components.pil


mencoder.file = "${logdir}/rawseeds_laser_bgds_boot.avi"
odometry.file = "${logdir}/ODOMETRY_XYT.csv.bz2"


|rawseeds_synchronized_laser logdir=$logdir| --> y

|odometry:RawseedsOdo| --> |fps_data_limit fps=30| --> odometry --> |pose2commands| --> commands


import procgraph.components.cv

y --> |derivative| --> y_dot
y --> |gradient1d| --> gy

y_dot, gy --> |sync| --> |*| --> dygy 

dygy, commands --> |sync| --> |outer| --> Gi

Gi --> |expectation| --> G


y_dot, commands --> |sync| --> |outer| --> |expectation| -> B


    gy, B, G --> |sync| --> |fps_data_limit fps=0.1| --> gys, Bs, Gs


    gys --> |plot| --> gy_rgb
    Gs --> |take axis=1 indices=[0]| --> |plot| --> G_x
    Gs --> |take axis=1 indices=[1]| --> |plot| --> G_y
    Gs --> |take axis=1 indices=[2]| --> |plot| --> G_th
    Bs --> |take axis=1 indices=[0]| --> |plot| --> B_x
    Bs --> |take axis=1 indices=[1]| --> |plot| --> B_y
    Bs --> |take axis=1 indices=[2]| --> |plot| --> B_th
    
    
    G_x,G_y,G_th,B_x,B_y,B_th, gy_rgb --> |sync| --> |grid cols=3| --> rgb
    
    
    rgb --> |mencoder| 
     
     
     